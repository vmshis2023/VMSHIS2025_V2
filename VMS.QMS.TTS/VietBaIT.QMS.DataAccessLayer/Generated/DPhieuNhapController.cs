using System; 
using System.Text; 
using System.Data;
using System.Data.SqlClient;
using System.Data.Common;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Configuration; 
using System.Xml; 
using System.Xml.Serialization;
using SubSonic; 
using SubSonic.Utilities;
// <auto-generated />
namespace VietBaIT.HISLink.DataAccessLayer
{
    /// <summary>
    /// Controller class for D_PHIEU_NHAP
    /// </summary>
    [System.ComponentModel.DataObject]
    public partial class DPhieuNhapController
    {
        // Preload our schema..
        DPhieuNhap thisSchemaLoad = new DPhieuNhap();
        private string userName = String.Empty;
        protected string UserName
        {
            get
            {
				if (userName.Length == 0) 
				{
    				if (System.Web.HttpContext.Current != null)
    				{
						userName=System.Web.HttpContext.Current.User.Identity.Name;
					}
					else
					{
						userName=System.Threading.Thread.CurrentPrincipal.Identity.Name;
					}
				}
				return userName;
            }
        }
        [DataObjectMethod(DataObjectMethodType.Select, true)]
        public DPhieuNhapCollection FetchAll()
        {
            DPhieuNhapCollection coll = new DPhieuNhapCollection();
            Query qry = new Query(DPhieuNhap.Schema);
            coll.LoadAndCloseReader(qry.ExecuteReader());
            return coll;
        }
        [DataObjectMethod(DataObjectMethodType.Select, false)]
        public DPhieuNhapCollection FetchByID(object IdPhieuNhap)
        {
            DPhieuNhapCollection coll = new DPhieuNhapCollection().Where("ID_PHIEU_NHAP", IdPhieuNhap).Load();
            return coll;
        }
		
		[DataObjectMethod(DataObjectMethodType.Select, false)]
        public DPhieuNhapCollection FetchByQuery(Query qry)
        {
            DPhieuNhapCollection coll = new DPhieuNhapCollection();
            coll.LoadAndCloseReader(qry.ExecuteReader()); 
            return coll;
        }
        [DataObjectMethod(DataObjectMethodType.Delete, true)]
        public bool Delete(object IdPhieuNhap)
        {
            return (DPhieuNhap.Delete(IdPhieuNhap) == 1);
        }
        [DataObjectMethod(DataObjectMethodType.Delete, false)]
        public bool Destroy(object IdPhieuNhap)
        {
            return (DPhieuNhap.Destroy(IdPhieuNhap) == 1);
        }
        
        
    	
	    /// <summary>
	    /// Inserts a record, can be used with the Object Data Source
	    /// </summary>
        [DataObjectMethod(DataObjectMethodType.Insert, true)]
	    public void Insert(string MaPhieuNhap,string SoHoaDon,DateTime NgayNhapHdon,short? IdKhoNhap,short? IdKhoXuat,decimal? Vat,short? IdNhaCcap,string GhiChu,string NguoiGiao,short? IdNhanVien,byte? HienThi,byte? TrangThai,DateTime? NgayTao,string NguoiTao,string NguoiSua,DateTime? NgaySua,string IpMayTao,string IpMaySua,decimal? TongTien,byte? LoaiPhieu,string MaKieuPhieu,short? IdNvienXacNhan,string NguoiXacNhan,DateTime? NgayXacNhan,short? IdKhoaLinh,DateTime? NgayLapPhieu,string DiaDiem)
	    {
		    DPhieuNhap item = new DPhieuNhap();
		    
            item.MaPhieuNhap = MaPhieuNhap;
            
            item.SoHoaDon = SoHoaDon;
            
            item.NgayNhapHdon = NgayNhapHdon;
            
            item.IdKhoNhap = IdKhoNhap;
            
            item.IdKhoXuat = IdKhoXuat;
            
            item.Vat = Vat;
            
            item.IdNhaCcap = IdNhaCcap;
            
            item.GhiChu = GhiChu;
            
            item.NguoiGiao = NguoiGiao;
            
            item.IdNhanVien = IdNhanVien;
            
            item.HienThi = HienThi;
            
            item.TrangThai = TrangThai;
            
            item.NgayTao = NgayTao;
            
            item.NguoiTao = NguoiTao;
            
            item.NguoiSua = NguoiSua;
            
            item.NgaySua = NgaySua;
            
            item.IpMayTao = IpMayTao;
            
            item.IpMaySua = IpMaySua;
            
            item.TongTien = TongTien;
            
            item.LoaiPhieu = LoaiPhieu;
            
            item.MaKieuPhieu = MaKieuPhieu;
            
            item.IdNvienXacNhan = IdNvienXacNhan;
            
            item.NguoiXacNhan = NguoiXacNhan;
            
            item.NgayXacNhan = NgayXacNhan;
            
            item.IdKhoaLinh = IdKhoaLinh;
            
            item.NgayLapPhieu = NgayLapPhieu;
            
            item.DiaDiem = DiaDiem;
            
	    
		    item.Save(UserName);
	    }
    	
	    /// <summary>
	    /// Updates a record, can be used with the Object Data Source
	    /// </summary>
        [DataObjectMethod(DataObjectMethodType.Update, true)]
	    public void Update(int IdPhieuNhap,string MaPhieuNhap,string SoHoaDon,DateTime NgayNhapHdon,short? IdKhoNhap,short? IdKhoXuat,decimal? Vat,short? IdNhaCcap,string GhiChu,string NguoiGiao,short? IdNhanVien,byte? HienThi,byte? TrangThai,DateTime? NgayTao,string NguoiTao,string NguoiSua,DateTime? NgaySua,string IpMayTao,string IpMaySua,decimal? TongTien,byte? LoaiPhieu,string MaKieuPhieu,short? IdNvienXacNhan,string NguoiXacNhan,DateTime? NgayXacNhan,short? IdKhoaLinh,DateTime? NgayLapPhieu,string DiaDiem)
	    {
		    DPhieuNhap item = new DPhieuNhap();
	        item.MarkOld();
	        item.IsLoaded = true;
		    
			item.IdPhieuNhap = IdPhieuNhap;
				
			item.MaPhieuNhap = MaPhieuNhap;
				
			item.SoHoaDon = SoHoaDon;
				
			item.NgayNhapHdon = NgayNhapHdon;
				
			item.IdKhoNhap = IdKhoNhap;
				
			item.IdKhoXuat = IdKhoXuat;
				
			item.Vat = Vat;
				
			item.IdNhaCcap = IdNhaCcap;
				
			item.GhiChu = GhiChu;
				
			item.NguoiGiao = NguoiGiao;
				
			item.IdNhanVien = IdNhanVien;
				
			item.HienThi = HienThi;
				
			item.TrangThai = TrangThai;
				
			item.NgayTao = NgayTao;
				
			item.NguoiTao = NguoiTao;
				
			item.NguoiSua = NguoiSua;
				
			item.NgaySua = NgaySua;
				
			item.IpMayTao = IpMayTao;
				
			item.IpMaySua = IpMaySua;
				
			item.TongTien = TongTien;
				
			item.LoaiPhieu = LoaiPhieu;
				
			item.MaKieuPhieu = MaKieuPhieu;
				
			item.IdNvienXacNhan = IdNvienXacNhan;
				
			item.NguoiXacNhan = NguoiXacNhan;
				
			item.NgayXacNhan = NgayXacNhan;
				
			item.IdKhoaLinh = IdKhoaLinh;
				
			item.NgayLapPhieu = NgayLapPhieu;
				
			item.DiaDiem = DiaDiem;
				
	        item.Save(UserName);
	    }
    }
}
